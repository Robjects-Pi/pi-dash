## Setting up from scratch (advanced)

~~It’s recommended to use the SD card image if you are setting up this project for the first time, especially if you are not making any changes to its behavior or want to expand off of the examples given. It will definitely save you a lot of hassle and time trying to adapt the camera dependencies and libraries in other Raspberry Pi versions as they are known to change dramatically in the operation of cameras across OS versions. This guide is included to give you an overview of the technical underpinnings of combining python with bash scripts and services executed by the Operating system which you can refer to if you wish to modify its code or incorporate your own unique features.~~<br>
<br>

## About the system

At the DIY Dashboard heart is a Raspberry Pi Zero that will be performing the logic and continuous recordings when the computer starts up. It’s responsible for interfacing with the user’s connected camera module (connected via cable). The OS starts automatically, and does its usual bootup related to the rpi lite initialization. So in order to start recordings as soon as possible, we utilize the system's service to start the python files that 
begin the recordings, set to a pre-determined time we want the recordings to be in. For example, you might want to break up recordings to a very small duration in case you potentially want to use the recordings in data science applications since are limited in the amount of processing it can perform on larger sized data. Or, if you are just hoping to record larger size durations, with the addition of a large sized memory card or attached usb, you might want to record 5 minutes, with the least amount of gaps as you plan to only use the data whenever the need arises.

Thus, I have created a setup script that allows you easily change the duration of each video clip taken. Keep in mind that if you don't plan on adding an extra battery, it is very possible you lose the last clip that the camera records, which if you created a long duration, could end up being very unfortunate if you turn off your car, or worse... your car turns off due to a wreck or accident.


## Instructions

1. First, you need to update the package list and upgrade the packages if you have not already done by running the following commands:
```bash
$ sudo apt-get update
$ sudo apt-get upgrade
```

2. Next, Change to the home directory and clone the repository if you have not already done so

```bash
cd
git clone
```
3. Enable the camera
```
$ sudo raspi-config
```

<!-- TODO: create gif of choosing new interface -->

4. Select `Interfacing Options` and then `Camera` and enable the camera. Reboot the Raspberry Pi Zero after enabling the camera.

<!-- check if packages are correct
5. Install the required packages
```
$ sudo apt-get install python3-picamera
```
-->


1. Change to the directory where the code is located and run the record script to start recording. The script will start recording and save the video files in the `videos` directory. The script will run until you stop it by pressing `Ctrl+C`. To run the script, run the following commands:

```
$ cd ~/pi-dash/software/
$ python3 record.py
```

Note: This script does not enable automatic recording on boot. To enable automatic recording on boot, follow the next steps.

1. Copy the `record.service` file to the `/etc/systemd/system/` directory by running the following command:

```
$ sudo cp record.service /etc/systemd/system/
```

2. Reload the systemd manager configuration by running the following command:

```
$ sudo systemctl daemon-reload
```

3. Enable the service to start on boot by running the following command:

```
$ sudo systemctl enable record.service
```

4. Start the service by running the following command:

```
$ sudo systemctl start record.service
```

5. Check the status of the service by running the following command:

```
$ sudo systemctl status record.service
```

The service should be running and the camera should be recording. The video files will be saved in the `videos` directory.

6. To stop the service, run the following command:

```
$ sudo systemctl stop record.service
```

7. To disable the service from starting on boot, run the following command:

```
$ sudo systemctl disable record.service
```

8. To remove the service, run the following command:

```
$ sudo rm /etc/systemd/system/record.service
```
<TODO:  Create instructions for moving into an external usb >

<TODO: make instructions for>


## Next steps

Now that you have the software configured, you can start recording videos with the Raspberry Pi Zero. To see how to print a custom case for the Raspberry Pi Zero and camera module, check out the next section for how to print using a 3D printer.
