To see the code for Rpi OS before the libcamera update where raspivid can be used, checkout the [code](https://github.com/garzarobm/piDash) finalized as a public archive. It follows a very similar implementation.



